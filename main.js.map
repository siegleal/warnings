{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/alert-card/alert-card.component.ts","./src/app/alert-card/alert-card.component.html","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/cap.service.ts","./src/app/count-card/count-card.component.ts","./src/app/count-card/count-card.component.html","./src/environments/environment.ts","./src/main.ts","./src/utils.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Alert, AlertStatus, EventType, Point } from '../../utils';\nimport { Input, ElementRef } from '@angular/core';\n\n@Component({\n  selector: 'app-alert-card[alert]',\n  templateUrl: './alert-card.component.html',\n  styleUrls: ['./alert-card.component.css']\n})\nexport class AlertCardComponent implements OnInit {\n   @Input() alert!: Alert;\n   @ViewChild('hiddencontainer') hiddenContainer!: ElementRef<HTMLDivElement>;\n   @ViewChild('poly') polyCanvas!: ElementRef<HTMLCanvasElement>;\n\n\n  ngAfterViewInit(): void {\n    this.drawCanvas()\n  }\n  ngOnInit(): void {\n    \n  }\n\n  getTitle(): string {\n    return this.alert.event;\n  }\n\n  timeUntilExpiration(): number {\n    const now: number = (new Date).getTime();\n    const diff = new Date(this.alert.expires).getTime() - now;\n    return Math.round(diff / 1000 / 60);\n  }\n\n  getStatusString(): string {\n    switch (this.alert.status) {\n      case AlertStatus.NEW:\n        return \"New\";\n      case AlertStatus.EXISTING:\n        return \"Existing\";\n      case AlertStatus.UPGRADED:\n        return \"Upgraded\";\n\n    }\n  }\n\n  drawCanvas(): void {\n    if (this.polyCanvas === undefined) {\n      console.warn(\"Polygon canvas was undefined\")\n      return \n    }\n    let ctx: CanvasRenderingContext2D | null = this.polyCanvas.nativeElement.getContext('2d');\n    if (ctx === null){\n      return\n    }\n    if (this.alert.polygon.length == 0) {\n      return \n    }\n    let adjusted = Point.adjustArray(this.alert.polygon);\n    ctx.strokeStyle = '#000';\n    ctx.lineWidth = 1;\n    ctx.transform(1, 0, 0, -1, 0, this.polyCanvas.nativeElement.height)\n    ctx.beginPath();\n    let current: Point = adjusted[0]\n    ctx.moveTo(current.x, current.y)\n    for(let index = 1; index < adjusted.length; index++){\n      current = adjusted[index]\n      ctx.lineTo(current.x, current.y);\n    }\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  shouldDisplayHazards(): boolean {\n    return (this.alert !== undefined &&\n      (this.alert.windGust > 0 ||\n        this.alert.hailSize > 0))\n  }\n\n  shouldDisplaySvrHazards(): boolean {\n    return (this.alert !== undefined &&\n      (this.alert.thunderstormDamage.length > 0))\n  }\n\n  shouldDisplayTorHazards(): boolean {\n    return (this.alert !== undefined &&\n      (this.alert.tornadoDetection.length > 0))\n  }\n\n  toggleDescription(): void {\n    if (this.hiddenContainer.nativeElement.classList.contains('hidden')) {\n      this.hiddenContainer.nativeElement.classList.remove('hidden')\n    } else {\n      this.hiddenContainer.nativeElement.classList.add('hidden')\n    }\n  }\n\n  getClass(): string {\n    return this.alert.alertClass.name.toLowerCase();\n  }\n\n  getTorDetectionClass(): string {\n    if (this.alert.eventType === EventType.SVR) {\n      return \"red\";\n    }\n    return \"\";\n  }\n}\n","<div *ngIf=\"alert\" class=\"{{ getClass() }} alert-card-container\" (click)=\"toggleDescription()\" >\n  <div class=\"header\">\n    <div class=\"title\">{{ getTitle() }}</div>\n    <!-- <div class=\"modifier\">{{ alert.getClassification().modifier }}</div> -->\n    <div class=\"subtitle\">\n      <div>Status: {{getStatusString()}}</div>\n      <div>From: {{alert.sender}}</div>\n      <div>{{alert.areaDesc}}</div>\n      <div>Expires in: {{timeUntilExpiration()}} minutes</div>\n    </div>\n  </div>\n  <div class=\"hazards\" *ngIf=\"shouldDisplayHazards()\">\n  <div class=\"left hazard-item\" *ngIf=\"alert.hailSize > 0\">Hail: {{alert.hailSize}} in</div>\n  <div class=\"right hazard-item\" *ngIf=\"alert.windGust > 0\">Wind gusts: {{alert.windGust}} MPH</div>\n  </div>\n  <div class=\"svrHazards\" *ngIf=\"shouldDisplaySvrHazards()\">\n    <div *ngIf=\"alert.thunderstormDamage\">T-Storm Damage: {{alert.thunderstormDamage}}</div>\n  </div>\n  <div class=\"torHazards\" *ngIf=\"shouldDisplayTorHazards()\">\n    <div *ngIf=\"alert.tornadoDetection\">\n      <span  class=\"{{ getTorDetectionClass() }}\" >\n        Tornado: {{alert.tornadoDetection}}\n      </span></div>\n    <div *ngIf=\"alert.tornadoDamage\">Tornado damage: {{alert.tornadoDamage}}</div>\n  </div>\n    <div *ngIf=\"alert.polygon\" class=\"polygon\">\n      <canvas #poly width=\"50px\" height=\"50px\" id=\"polygon\"></canvas>\n    </div>\n  <div #hiddencontainer class=\"hidden\">\n    <div class=\"desc\">{{ alert.description }}</div>\n  </div>\n</div>\n","import { Component, ElementRef, ViewChild } from '@angular/core';\nimport { CapService } from './cap.service';\nimport { Alert, Entry, AlertsApi, AlertClass } from '../utils';\nimport * as saveAs from 'file-saver';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'warnings-ng';\n  alerts: Alert[]\n  loaded: boolean = false;\n  isLive: boolean = true;\n  @ViewChild('counts') counts!: ElementRef<HTMLDivElement>;\n  @ViewChild('plus') plus!: ElementRef<HTMLDivElement>;\n  @ViewChild('minus') minus!: ElementRef<HTMLDivElement>;\n  classes: AlertClass[] = [\n    AlertClass.SWS,\n    AlertClass.SVR,\n    AlertClass.SVRCON,\n    AlertClass.SVRDES,\n    AlertClass.TORRDR,\n    AlertClass.TOROBS,\n    AlertClass.TORPDS,\n    AlertClass.TORE\n  ]\n\n  constructor(private capService: CapService /*LocalgoService*/) {\n    this.alerts = []\n  }\n\n  toggleHidden(element: ElementRef): void {\n    if (element.nativeElement.classList.contains('hidden')){\n      element.nativeElement.classList.remove('hidden')\n    } else {\n      element.nativeElement.classList.add('hidden')\n    }\n  }\n\n  saveButton(): void {\n    this.capService.getLastJson()\n      .catch((reason) => console.log(reason))\n      .then((json: void | AlertsApi) => {\n        let jsonString = JSON.stringify(json)\n        let blob = new Blob([jsonString], {type:\"application/json;charset=utf-8\"})\n        let now = new Date()\n        saveAs(blob, `${now.getFullYear()}-${now.getMonth()}-${now.getDay()}_${now.getHours()}-${now.getMinutes()}-${now.getSeconds()}.json`)\n      })\n  }\n\n  showCounts(): void {\n    this.toggleHidden(this.counts)\n    this.toggleHidden(this.plus)\n    this.toggleHidden(this.minus)\n  }\n\n  getCounts(){\n    let arr: Entry[] = [];\n    this.classes.forEach(x => {\n      // arr.push(new Entry(x, this.alerts.filter(y => y.getClassification() === x).length))\n      arr.push(new Entry(x, this.alerts.filter(y => y.alertClass === x).length))\n    })\n    return arr;\n  }\n\n  ngOnInit(): void {\n    chrome.storage.local.get(['active'])\n      .then((result: { [key: string]: string }) => {\n        this.isLive = result['active'] === undefined ? true : Boolean(result['active']);\n        this.capService.getAlerts()\n          .then((alerts: Alert[]) => {\n            this.alerts = alerts;\n            this.loaded = true;\n            return this.capService.storeAlerts(alerts);\n          })\n      })\n  }\n}","<div id=\"container\">\n  <div class=\"loading\" *ngIf=\"!loaded\">Loading...</div>\n  <div class=\"loading\" *ngIf=\"loaded && alerts.length == 0\">No Results</div>\n  <div *ngIf=\"loaded\">\n    <div class=\"live-container\" *ngIf=\"!isLive\">\n      <div class=\"live\">NOT LIVE</div>\n    </div>\n  <div class=\"counts-container\" *ngIf=\"alerts.length > 0\" >\n  <div class=\"counts-header\"  (click)=\"showCounts()\">\n    <div >Counts</div>\n    <div #plus class=\"icon\">+</div>\n    <div #minus class=\"icon hidden\">-</div>\n  </div>\n  <div #counts class=\"counts hidden\">\n    <app-count-card *ngFor=\"let e of getCounts()\" [entry]=\"e\"></app-count-card>\n  </div>\n  </div>\n<app-alert-card *ngFor=\"let alert of alerts\" [alert]=\"alert\" ></app-alert-card>\n<button class=\"save-button\" (click)=\"saveButton()\">Save JSON</button>\n</div>\n</div>","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\n\nimport { AppComponent } from './app.component';\nimport { AlertCardComponent } from './alert-card/alert-card.component';\nimport { CountCardComponent } from './count-card/count-card.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    AlertCardComponent,\n    CountCardComponent,\n  ],\n  imports: [\n    BrowserModule,\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { Alert, AlertsApi, EventType, Feature, AlertStorage, AlertStatus } from '../utils';\nimport * as $ from 'jquery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CapService {\n  URLS: { [key: string]: string } = {\n    \"base\": \"http://api.weather.gov/alerts\",\n    \"active\": \"http://api.weather.gov/alerts/active?status=actual&event=Tornado%20Warning,Severe%20Thunderstorm%20Warning,Special%20Weather%20Statement\",\n    \"tornadoes\": \"http://api.weather.gov/alerts?event=Tornado%20Warning\"\n  }\n  lastJson: AlertsApi | null = null\n\n  constructor() { }\n\n  getUrl(): Promise<string> {\n    return chrome.storage.local.get(['types', 'active'])\n      .then((storageResult: { [key: string]: string }) => {\n        const typesResult = storageResult['types'];\n        const active = storageResult['active'] === undefined ? true : storageResult['active'];\n        let resultUrl = this.URLS['base']\n        if (active) {\n          resultUrl += \"/active?status=actual\"\n        } else {\n          resultUrl += \"?status=actual\"\n        }\n\n        if (typesResult === undefined) {\n          return resultUrl\n        }\n        return resultUrl + \"&event=\" + typesResult;\n      })\n\n  }\n\n  getLastJson(): Promise<AlertsApi> {\n    return new Promise<AlertsApi>((resolve, reject) => {\n      if (this.lastJson !== null) {\n        resolve(this.lastJson)\n      }\n      reject('lastJson is not set')\n    })\n  }\n\n  private processJson(data: AlertsApi): Alert[] {\n    this.lastJson = data\n    let features: Feature[] = data.features;\n    return features\n      .filter(elem => {\n        if (elem.properties.event === 'Special Weather Statement') {\n          return elem.properties.description ? elem.properties.description.includes('thunderstorm') : false;\n        }\n        return true;\n      })\n      .map(f => new Alert(f))\n      .sort((a, b) => a.alertClass.priority - b.alertClass.priority)\n  }\n\n  getAlerts(): Promise<Alert[]> {\n    const headers = { 'method': 'GET', 'headers': { 'Accept': 'application/geo+json' } }\n\n    return this.getUrl()\n      .then((url: string) => {\n        console.log('URL: %s', url)\n        return fetch(url, headers)\n      })\n      .then(response => response.json())\n      .then((json: AlertsApi) => this.processJson(json))\n      .then((alerts: Alert[]) => {\n        alerts = alerts.sort((a: Alert, b: Alert) => a.status < b.status ? -1 : 1);\n        return alerts;\n      })\n  }\n\n\n  async storeAlerts(alerts: Alert[]) {\n    const currentStorage = await chrome.storage.local.get('alerts');\n    let currentStorageValue = currentStorage['alerts'] === undefined ? [] : currentStorage['alerts'];\n    let currentStorageMap = new Map<string, Alert>(currentStorageValue.map((a: Alert) => [a.id, a]));\n    let events = new Set<string>();\n    alerts.forEach((a: Alert) => {\n      events.add(a.event);\n      let isNew = !currentStorageMap.has(a.id);\n      if (!isNew) {\n        let oldClass = currentStorageMap.get(a.id)!.alertClass;\n        if (oldClass > a.alertClass) {\n          a.status = AlertStatus.UPGRADED\n        } else {\n          a.status = AlertStatus.EXISTING\n        }\n      }\n    });\n    console.log('Set of events');\n    Array.from(events).sort().forEach((val: string, index: Number, array: Array<string>) => {\n      console.log(val);\n    })\n    chrome.storage.local.set({ 'alerts': alerts });\n  }\n\n}","import { Component, Input, OnInit} from '@angular/core';\nimport { Entry } from \"../../utils\";\n\n@Component({\n  selector: 'app-count-card',\n  templateUrl: './count-card.component.html',\n  styleUrls: ['./count-card.component.css']\n})\nexport class CountCardComponent implements OnInit {\n  @Input() entry!: Entry;\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"{{entry.cls.name}} line\">\n  <div class=\"left\">\n    {{ entry.cls.name }}\n  </div>\n  <div class=\"right\">\n    {{ entry.count }}\n  </div>\n</div>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","export class EventType {\n  text: string\n  cssClass: string\n  priority: number\n\n  constructor(text: string, cssClass: string, pri: number){\n    this.text = text;\n    this.cssClass = cssClass;\n    this.priority = pri\n  }\n\n  static TOR: EventType =\n        new EventType(\"Tornado Warning\", \"tor\", 2);\n  static SVR: EventType =\n        new EventType(\"Severe Thunderstorm Warning\", \"svr\", 1);\n  static SWS: EventType =\n        new EventType(\"Special Weather Statement\", \"spec\", 0);\n  static OTHER: EventType =\n        new EventType(\"Other\", \"\", -1);\n\n  static fromCaps(capsFeature: any){\n    switch(capsFeature.properties.event){\n      case this.TOR.text:\n        return this.TOR;\n      case this.SVR.text:\n        return this.SVR;\n      case this.SWS.text:\n        return this.SWS;\n      default:\n        return this.OTHER;\n    }\n    \n  }\n}\n\nexport class BoundingRectangle {\n  minX: number = 0;\n  minY: number = 0;\n  maxX: number = 0;\n  maxY: number = 0;\n}\n\nexport class Point {\n  x: number\n  y: number\n\n  constructor(arr: number[]){\n    this.x = arr[0]\n    this.y = arr[1]\n  }\n\n  static fromFeature(feature: any): Point[] {\n    if (feature.geometry === null || feature.geometry.coordinates === null){\n      return [];\n    }\n    return feature.geometry.coordinates[0].map((coord: any) => new Point(coord))\n  }\n\n  static getBoundingRectangle(arr: Point[]): BoundingRectangle {\n    let result: BoundingRectangle = new BoundingRectangle();\n    result.minX = Math.min(...arr.map(e => e.x))\n    result.minY = Math.min(...arr.map(e => e.y))\n    result.maxX = Math.max(...arr.map(e => e.x))\n    result.maxY = Math.max(...arr.map(e => e.y))\n    return result;\n  }\n\n  static adjustArray(arr: Point[]): Point[]{\n    let boundingRect: BoundingRectangle = Point.getBoundingRectangle(arr);\n    let longestDiff = Math.max(boundingRect.maxX-boundingRect.minX, boundingRect.maxY - boundingRect.minY)\n    let factor = longestDiff / 50.0 * 100.0;\n    return arr.map(p => new Point([Math.floor((p.x - boundingRect.minX) * 100.0 / factor), Math.floor((p.y - boundingRect.minY) * 100.0 / factor)]));\n  }\n}\n\nexport class AlertClass {\n  static readonly TORE =       new AlertClass('TOR-E', 0);\n  static readonly TORPDS =     new AlertClass('TOR-PDS',1);\n  // static readonly TORCAT = new AlertClass('tor-catastrophic','Tornado Warning', 'Catastrophic');\n  // static readonly TORCON = new AlertClass('tor-considerable','Tornado Warning', 'Considerable');\n  static readonly TOROBS =     new AlertClass('TOR-OBS',2);\n  static readonly TORRDR =     new AlertClass('TOR-RI', 3);\n  static readonly TOR =        new AlertClass('TOR', 4);\n  static readonly SVRDES =     new AlertClass('SVR-DES', 5);\n  static readonly SVRCON =     new AlertClass('SVR-CON', 6);\n  static readonly SVR =        new AlertClass('SVR', 7);\n  static readonly SWS =        new AlertClass('SWS', 8);\n  static readonly UNKNOWN =    new AlertClass('OTHER', 9);\n\n\n  constructor(readonly name: string, readonly priority: number){}\n}\n\nexport enum AlertStatus {\n  UPGRADED,\n  NEW,\n  EXISTING,\n}\n\nexport class Alert {\n  id: string\n  event: string\n  description: string\n  areaDesc: string\n  effective: Date\n  expires: Date\n  sender: string\n  windGust: number\n  hailSize: number\n  tornadoDetection: string\n  tornadoDamage: string\n  thunderstormDamage: string\n  eventType: EventType\n  alertClass: AlertClass\n  polygon: Point[]\n  status: AlertStatus = AlertStatus.NEW\n\n  constructor(feature: Feature) {\n    let props = feature.properties;\n    this.id = feature.id;\n    this.event = props.event;\n    this.eventType = EventType.fromCaps(feature)\n    this.description = props.description || \"\";\n    this.areaDesc = props.areaDesc;\n    this.effective = new Date(props.effective)\n    this.expires = new Date(props.expires)\n    this.sender = props.senderName\n    this.polygon = Point.fromFeature(feature)\n\n    this.windGust = 0;\n    if ('maxWindGust' in props.parameters) {\n      this.windGust = props.parameters.maxWindGust[0].slice(0,-4).replace('Up to', '')\n    }\n    this.hailSize = 0;\n    if ('maxHailSize' in props.parameters) {\n      this.hailSize = props.parameters.maxHailSize[0]\n    }\n    this.tornadoDetection = ''\n    if ('tornadoDetection' in props.parameters) {\n      this.tornadoDetection = props.parameters.tornadoDetection[0]\n    }\n    this.thunderstormDamage= ''\n    if ('thunderstormDamageThreat' in props.parameters) {\n      this.thunderstormDamage= props.parameters.thunderstormDamageThreat[0]\n    }\n    this.tornadoDamage= ''\n    if ('tornadoDamageThreat' in props.parameters) {\n      this.tornadoDamage= props.parameters.tornadoDamageThreat[0]\n    }\n\n    switch (this.event.toLowerCase()) {\n      case \"tornado warning\":\n        if (this.description.toLowerCase().includes('tornado emergency')){\n          this.alertClass = AlertClass.TORE\n          break;\n        }\n        if (this.description.toLowerCase().includes('particularly dangerous situation')) {\n          this.alertClass = AlertClass.TORPDS\n          break;\n        }\n        if (this.tornadoDetection.toLowerCase() === \"observed\"){\n          this.alertClass = AlertClass.TOROBS\n          break;\n        }\n        if (this.tornadoDetection.toLowerCase() === \"radar indicated\") {\n          this.alertClass = AlertClass.TORRDR\n          break;\n        }\n        this.alertClass = AlertClass.TOR\n        break;\n      case \"severe thunderstorm warning\":\n        switch (this.thunderstormDamage.toLowerCase()){\n          case \"considerable\":\n            this.alertClass = AlertClass.SVRCON\n            break;\n          case \"destructive\":\n            this.alertClass = AlertClass.SVRDES\n            break;\n          default:\n            this.alertClass = AlertClass.SVR\n            break;\n        }\n        break;\n      case \"special weather statement\":\n        this.alertClass = AlertClass.SWS\n        break;\n      default:\n        this.alertClass = AlertClass.UNKNOWN\n        break;\n    }\n  }\n\n  timeUntilExpiration(): number {\n    const now: number = (new Date).getTime();\n    const diff = this.expires.getTime() - now;\n    return Math.round(diff / 1000 / 60);\n  }\n}\n\n  // priority(): number {\n  //   //https://www.weather.gov/media/alert/CAP_v12_guide_05-16-2017.pdf\n  //   let current = this.eventType.priority\n  //   if (this.thunderstormDamage.length > 0) {\n  //     switch (this.thunderstormDamage) {\n  //       case \"CONSIDERABLE\":\n  //         current += .1\n  //         break;\n  //       case \"DESTRUCTIVE\":\n  //         current += .2\n  //         break;\n  //       default:\n  //         break;\n  //     }\n  //   }\n  //   //TOR only\n  //   if (this.tornadoDamage.length > 0){\n  //     switch (this.tornadoDamage){\n  //       case \"CONSIDERABLE\":\n  //         current += .1\n  //         break;\n  //       case \"CATASTRPHIC\":\n  //         current += .2\n  //         break;\n  //       default:\n  //         break;\n  //     }\n  //   }\n  //   // possible on SVR\n  //   if (this.tornadoDetection.length > 0){\n  //     switch (this.tornadoDetection){\n  //       case \"POSSIBLE\":\n  //         current += .05\n  //         break;\n  //       case \"RADAR INDICATED\":\n  //         current += .2\n  //         break;\n  //       case \"OBSERVED\":\n  //         current += .3\n  //         break;\n  //       default:\n  //         break;\n  //     }\n  //   }\n\n  //   return current\n  // }\n\n\n// export class Classification {\n//   static readonly TORE =   new Classification('tor-emergency', 'Tornado Warning','TORNADO EMERGENCY');\n//   static readonly TORPDS = new Classification('tor-pds','Tornado Warning', 'PDS');\n//   static readonly TORCAT = new Classification('tor-catastrophic','Tornado Warning', 'Catastrophic');\n//   static readonly TORCON = new Classification('tor-considerable','Tornado Warning', 'Considerable');\n//   static readonly TOROBS = new Classification('tor-observed','Tornado Warning', 'Observed');\n//   static readonly TORRDR = new Classification('tor-radar', 'Tornado Warning','Radar Indicated');\n//   static readonly SVRDES = new Classification('svr-destructive', 'Severe Thunderstorm Warning','Destructive');\n//   static readonly SVRCON = new Classification('svr-considerable', 'Severe Thunderstorm Warning','Considerable');\n//   static readonly SVR =    new Classification('svr', 'Severe Thunderstorm Warning');\n//   static readonly SWS =    new Classification('sws', 'Special Weather Statement');\n//   static readonly UNKNOWN =    new Classification('', 'Unknown Event');\n\n\n//   constructor(readonly css_class: string, readonly title: string, readonly modifier: string = '') {}\n\n// }\n\nexport interface Feature {\n  id: string\n  type: string\n  geometry: Geometry\n  properties: Properties\n\n}\n\nexport interface AlertsApi {\n  type: string\n  features: any[]\n  title: string\n  updated: string\n}\n\ninterface Geometry {\n  type: string\n  coordinates: any //dont care\n}\n\ninterface Properties {\n  id: string\n  areaDesc: string\n  geocode: any\n  affectedZones: string[]\n  references: string[]\n  sent: string\n  effective: string\n  onset: string\n  expires: string\n  ends: string\n  status: string\n  messageType: string\n  category: string\n  severity: string\n  certainty: string\n  urgency: string\n  event: string\n  sender: string\n  senderName: string\n  headline: string\n  description: string\n  instruction: string\n  response: string\n  parameters: any\n}\n\nexport class Entry {\n  constructor(public cls: AlertClass, public count: number) {\n    this.cls = cls;\n    this.count = count;\n  }\n}\n\nexport interface AlertStorage {\n  id: string\n  alertClass: AlertClass\n}"],"names":["Alert","AlertStatus","CapService","constructor","getUrl","chrome","storage","local","get","then","storageResult","typesResult","active","undefined","resultUrl","URLS","getLastJson","Promise","resolve","reject","lastJson","processJson","data","features","filter","elem","properties","event","description","includes","map","f","sort","a","b","alertClass","priority","getAlerts","headers","url","console","log","fetch","response","json","alerts","status","storeAlerts","currentStorage","currentStorageValue","currentStorageMap","Map","id","events","Set","forEach","add","isNew","has","oldClass","UPGRADED","EXISTING","Array","from","val","index","array","set","factory","providedIn"],"sourceRoot":"webpack:///"}